#!/bin/sh

# Creates a new note with front matter and open it in $EDITOR
# Usage: nn 'string'
#
# Accepts strings with spaces and will slugify them too.

if [ $# -eq 0 ]; then
  echo "No arguments supplied: ex: nn 'Note title'"
  exit 1;
else
  SLUG=$(echo $@ | iconv -t ascii//TRANSLIT | sed -E s/[^a-zA-Z0-9]+/-/g | sed -E s/^-+\|-+$//g | tr A-Z a-z)
  DIRECTORY="$HOME/Box Sync/notes/"
  FILE=$DIRECTORY$(date +"%F")-$SLUG.md
  FMT=$(cat <<EOF
    # $1

  ---
  date: $(date +"%F %H:%M")
  tags:
  ---

EOF
)

  echo "${FMT}" > "${FILE}"
  $EDITOR "${FILE}"
fi
