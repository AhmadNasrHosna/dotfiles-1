#!/bin/sh
#/ Usage: git update <branch>
#/ Depends on hub (https://hub.github.com/)
#/ Update current branch from another branch (default: master)
#/
#/ Example:
#/    git update - this will pull master, stash changes on your branch, merge master & pop the stash again.
#/    git update develop - this will do the same but with the develop branch
#/

if [ -n "$1" ]; then
  BRANCH="$1"
else
  BRANCH="$(git rev-parse --abbrev-ref HEAD)"
fi

git stash save && \
  hub sync && \
  git merge "$BRANCH" && \
  git stash pop && \
  # say "updated from $BRANCH!" && \
  osascript -e "display notification \"All good\" with title \"üê£\""

